name: Depedencies & Concurrencies

on:
  workflow_dispatch:

concurrency:
  group: dependency-group
  cancel-in-progress: false   # NEVER cancel in middle of deploy

jobs:
  banner:
    runs-on: ubuntu-latest
    steps:
      - run: echo "This is banner job! runs parallel!"

  build:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Building..."

  test:
    runs-on: ubuntu-latest
    needs: build      # ðŸ‘ˆ test waits for build
    steps:
      - run: echo "Running tests..."

  deploy:
    runs-on: ubuntu-latest
    needs: test       # ðŸ‘ˆ deploy waits for test
    steps:
      - run: echo "Deploying..."

  linting:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Liniting is done"

  unit-tests:
    runs-on: ubuntu-latest
    steps:
      - run: echo "unit test are done"

  e2-tests:
    runs-on: ubuntu-latest
    steps:
      - run: echo "e2-tests are done"

  post:
    runs-on: ubuntu-latest
    needs: [build, test, deploy, linting, unit-tests, e2-tests]
    steps:
      - run: echo "$date - Done with workflows!"

  # Usage of outputs b/w jobs
  prepare:
    runs-on: ubuntu-latest
    outputs:
      python_version: ${{ steps.get_python_version.outputs.python_version }}
      
    steps:
      - name: Set Python Version
        id: get_python_version
        run: |
          echo "python_version=$(python3 --version)"
          echo "python_version=$(python3 --version)" >> $GITHUB_OUTPUT

  after-prepate:
    runs-on: ubuntu-latest
    needs: prepare
    steps:
      - name: Read Python Version
        run: echo "Python version ${{ needs.prepare.outputs.python_version }}"
    
        
